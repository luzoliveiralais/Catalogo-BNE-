//Definição da modal 
function openModal(livro) {
    var txt1 = document.getElementById("txt1");
    var txt2 = document.getElementById("txt2");
    var txt3 = document.getElementById("txt3");

    switch (livro) {
        case "Livro1": 
            txt1.innerHTML = "A Biblioteca da Meia-Noite é um livro escrito por Matt Haig. A história segue um menino chamado Al, que descobre que a biblioteca da sua cidade se transforma em um lugar mágico à meia-noite. Lá, ele encontra um grupo de personagens literários que o ajudam a enfrentar os desafios da vida. O livro é publicado pela editora Canongate Books."
            txt2.innerHTML = "Português"
            txt3.innerHTML = "Canongate Books"
            break;
        case "Livro2": 
            txt1.innerHTML = "O Guia Definitivo do Mochileiro das Galáxias é um livro de ficção científica escrito por Douglas Adams. A história segue as aventuras de Arthur Dent, um homem comum que é arrastado para uma série de eventos intergalácticos após a destruição da Terra. O livro é conhecido por seu humor irônico e absurdo. Ele foi publicado pela editora Pan Books."
            txt2.innerHTML = "Potuguês"
            txt3.innerHTML = "Pan Books"
            break;
        case "Livro3": 
            txt1.innerHTML = "O Senhor dos Anéis: As duas torres é o segundo livro da trilogia épica de fantasia escrita por J.R.R. Tolkien. A história continua a jornada de Frodo Baggins em sua missão de destruir o anel do poder. Neste livro, o enredo se divide em várias tramas paralelas, incluindo a batalha de Rohan contra as forças do mal. O livro foi publicado pela editora HarperCollins."
            txt2.innerHTML = "Português"
            txt3.innerHTML = "HarperCollins"
            break;
        case "Livro4": 
            txt1.innerHTML = "Esses últimos, os humanos, com exceções, também adoram viajar, conhecer outros lugares, outras gentes e seus modos peculiares de viver. Tomam-se por arejados, abertos e até mais cultos por conta desse hábito. Talvez por isso usem – para julgar nossas vidas felinas – o critério da extensão territorial ocupada por nossos corpos. E acabam convencidos de que passar o dia todo confinado não pode valer a pena. Vê-se logo que ainda não aprenderam nada de relevante. E nunca aprenderão. Por mais que alguns deles – os poucos sábios da história humana na Terra – tenham generosamente se sacrificado para explicar, todos os demais da espécie sempre se recusaram a aceitar o óbvio: que o mais precioso da vida já se encontra em cada um deles. E que o sucesso dessa busca requer preparo. Exercício rigoroso de pensamento. E recato. Fica fácil de entender por que não saem da rua. Passeiam, viajam e se divertem. Na verdade, permanecem em fuga. Não suportam a verdade que grita em suas almas. Preferem chafurdar no pântano da ignorância – entretida pelas sombras da falsidade e das mentiras – a resistir, em resiliência, aos percalços e obstáculos que todo caminho de luz costuma impor a quem sempre viveu na sombra."
            txt2.innerHTML = "Português"
            txt3.innerHTML = "Citadel"
            break;
        case "Livro5": 
            txt1.innerHTML = "Esse livro é sobre isso, isso, isso, isso, isso, isso, isso  e isso.  "
            txt2.innerHTML = "Fulano de tal"
            txt3.innerHTML = "Editora tal"
            break
        case "Livro6": 
            txt1.innerHTML = "Esse livro é sobre isso, isso, isso, isso, isso, isso, isso  e isso.  "
            txt2.innerHTML = "Fulano de tal"
            txt3.innerHTML = "Editora tal"
            break;
        case "Livro7": 
            txt1.innerHTML = "Esse livro é sobre isso, isso, isso, isso, isso, isso, isso  e isso.  "
            txt2.innerHTML = "Fulano de tal"
            txt3.innerHTML = "Editora tal"
            break;
        case "Livro8": 
            txt1.innerHTML = "Esse livro é sobre isso, isso, isso, isso, isso, isso, isso  e isso.  "
            txt2.innerHTML = "Fulano de tal"
            txt3.innerHTML = "Editora tal"
            break;
        case "Livro9": 
            txt1.innerHTML = "Esse livro é sobre isso, isso, isso, isso, isso, isso, isso  e isso.  "
            txt2.innerHTML = "Fulano de tal"
            txt3.innerHTML = "Editora tal"
            break;
        case "Livro10": 
            txt1.innerHTML = "Esse livro é sobre isso, isso, isso, isso, isso, isso, isso  e isso.  "
            txt2.innerHTML = "Fulano de tal"
            txt3.innerHTML = "Editora tal"
            break;
        case "Livro11": 
            txt1.innerHTML = "Esse livro é sobre isso, isso, isso, isso, isso, isso, isso  e isso.  "
            txt2.innerHTML = "Fulano de tal"
            txt3.innerHTML = "Editora tal"
            break;
        case "Livro12": 
            txt1.innerHTML = "Esse livro é sobre isso, isso, isso, isso, isso, isso, isso  e isso.  "
            txt2.innerHTML = "Fulano de tal"
            txt3.innerHTML = "Editora tal"
            break;
        case "Livro13": 
            txt1.innerHTML = "Esse livro é sobre isso, isso, isso, isso, isso, isso, isso  e isso.  "
            txt2.innerHTML = "Fulano de tal"
            txt3.innerHTML = "Editora tal"
            break;  
        case "Livro14": 
            txt1.innerHTML = "Esse livro é sobre isso, isso, isso, isso, isso, isso, isso  e isso.  "
            txt2.innerHTML = "Fulano de tal"
            txt3.innerHTML = "Editora tal"
            break;  
        case "Livro15": 
            txt1.innerHTML = "Esse livro é sobre isso, isso, isso, isso, isso, isso, isso  e isso.  "
            txt2.innerHTML = "Fulano de tal"
            txt3.innerHTML = "Editora tal"
            break;
        case "Livro16": 
            txt1.innerHTML = "Esse livro é sobre isso, isso, isso, isso, isso, isso, isso  e isso.  "
            txt2.innerHTML = "Fulano de tal"
            txt3.innerHTML = "Editora tal"
            break;
        case "Livro17": 
            txt1.innerHTML = "Esse livro é sobre isso, isso, isso, isso, isso, isso, isso  e isso.  "
            txt2.innerHTML = "Fulano de tal"
            txt3.innerHTML = "Editora tal"
            break;
        case "Livro18": 
            txt1.innerHTML = "Esse livro é sobre isso, isso, isso, isso, isso, isso, isso  e isso.  "
            txt2.innerHTML = "Fulano de tal"
            txt3.innerHTML = "Editora tal"
            break;
        case "Livro19": 
            txt1.innerHTML = "Esse livro é sobre isso, isso, isso, isso, isso, isso, isso  e isso.  "
            txt2.innerHTML = "Fulano de tal"
            txt3.innerHTML = "Editora tal"
            break;
        case "Livro20": 
            txt1.innerHTML = "Esse livro é sobre isso, isso, isso, isso, isso, isso, isso  e isso.  "
            txt2.innerHTML = "Fulano de tal"
            txt3.innerHTML = "Editora tal"
            break;
    default:
            txt1.innerHTML  = "teste";    
            txt2.innerHTML  = "teste idi"; 
            txt3.innerHTML  = "teste edi";
    }

    document.getElementById("modal-resumo").style.display = "inline-block";
}

const modal = document.getElementById("modal-resumo");

function closeModal(){
    document.getElementById("modal-resumo").style.display = "none";
}
// Menu dinâmico para garantir responsividade

var menu = document.querySelector('nav ul'); 
var menuBar = document.querySelector('nav .menu-icon'); 
//var iconMenu = document.querySelector('nav .menu-icon img'); 

menuBar.addEventListener('click', function () {
    menu.classList.toggle('active'); 
})

// Validação do Formulário
// Variáveis 

const form = document.querySelector(".formulario")
const nome = document.querySelector("#nome")
const sobrenome = document.querySelector("#sobrenome")
const telefone = document.querySelector("#telefone")
const cpf = document.querySelector("#cpf")
const endereco = document.querySelector("#endereco")
const cep = document.querySelector("#cep")
const email = document.querySelector("#email")
const senha = document.querySelector("#senha")
const senha2 = document.querySelector("#senha2")


form.addEventListener("submit", (event) => {
    event.preventDefault(); 
    // Verifica se não existem campos vazios
    if (nome.value === "" || telefone.value === "" || cpf.value === "" ||
        endereco.value === "" || cep.value === "" || email.value === "" || senha.value === "" || senha2.value === "") {
        alert("Por favor, preencha todos os campos.");
        return;
    }
    //verifica o email digitado no respectivo campo de email
    if (!emailValido(email.value)){
        alert("Por favor, digite um email válido.");
        return;
    }

    if (!validaSenha(senha.value, 6)){
        alert("A senha precisa de no mínimo 6 dígitos.");
        return; 
    }

    if (!senhasIguais(senha.value, senha2.value)) {
        alert("As senhas digitadas não são iguais, tente digitar novamente."); 
        return;
    }

    if (!validaTelefone(telefone.value)) {
        alert("Digite corretamente o número de telefone."); 
        return; 
    }

    if(!validaCEP (cep.value)){
        alert("Digite corretamente o seu cep."); 
        return;
    } 

    if (!validaCPF(cpf.value)) {
        alert("Digite o seu CPF corretamente!");
        return; 
    }

    form.submit();
})

//Função que valida email
function emailValido (email) {
    //Cria uma regex para validar o email:
    //usuario738@host.com.br
    const emailRegex = new RegExp(/^[a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z]{2,}$/); 

    if (emailRegex.test(email)) {return true};
    return false; 
}

//Verifica se a senha tem o número min de dígitos 
function validaSenha(senha, minDigitos) {
    if (senha.length >= minDigitos) {
        return true; 
    } return false; 
}

//Verifica se os campos de senhas foram preenchidos com a mesma senha. 
function senhasIguais(senha, senha2) {
    if (senha === senha2) {
        return true;
    } return false;
}

//Verifica se o telefone foram corresponde ao padrão brasileiro de números.
function validaTelefone(numero) {
    // Remove todos os caracteres que não são dígitos
    const numeroLimpo = numero.replace(/\D/g, '');
  
    // Verifica se o número tem 11 dígitos e começa com 9 (celular) ou 8/9 (telefone fixo). 
    // Não permite cadastro de número sem ddd 
    const regex = /^(?:\+55|55)?(?:0?[1-9][1-9]|[1-9][2-9]|9[1-9])[0-9]{8,}$/;
    return regex.test(numeroLimpo);
}

function validaCEP(cep) {
    // Remove todos os caracteres que não sejam dígitos
    const cepLimpo = cep.replace(/\D/g, '');
  
    // Verifica se o CEP tem exatamente 8 dígitos
    // padrão do cep: 8 dígitos numéricos
    const regex = /^[0-9]{8,}$/;
    return regex.test(cepLimpo);
}


function validaCPF(cpf) {
    // Remove todos os caracteres que não sejam dígitos
    const cpfLimpo = cpf.replace(/\D/g, '');
  
    // Verifica se o CPF tem 11 dígitos
    if (cpfLimpo.length !== 11) {
      return false;
    }
  
    // Verifica se todos os dígitos são iguais (ex: 11111111111)
    if (/^(\d)\1+$/.test(cpfLimpo)) {
      return false;
    }
  
    // Calcula os dígitos verificadores
    let soma = 0;
    let resto;
    for (let i = 1; i <= 9; i++) {
      soma = soma + parseInt(cpfLimpo.substring(i - 1, i)) * (11 - i);
    }
    resto = (soma * 10) % 11;
    if (resto === 10 || resto === 11) {
      resto = 0;
    }
    if (resto !== parseInt(cpfLimpo.substring(9, 10))) {
      return false;
    }
  
    soma = 0;
    for (let i = 1; i <= 10; i++) {
      soma = soma + parseInt(cpfLimpo.substring(i - 1, i)) * (12 - i);
    }
    resto = (soma * 10) % 11;
    if (resto === 10 || resto === 11) {
      resto = 0;
    }
    if (resto !== parseInt(cpfLimpo.substring(10, 11))) {
      return false;
    }
  
    return true;
  }
  